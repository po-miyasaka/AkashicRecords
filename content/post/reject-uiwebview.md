+++  
author = "miyashi"  
title = "LLDBでUIWebViewを使っている箇所を調べる"  
date = "2020-05-15"  
description = ""  
tags = [  
    "LLDB",  
    "iOS",    
    "AppStoreConnect",    
    "UIWebView",    
]  
+++  

------------  
# 概要
2020年の４月末から、UIWebViewを使用しているアプリはAppStoreConnectにアップロードすることができなくなりました。  
アプリのメインターゲットでUIWebViewを使用していなくても、依存しているライブラリ内部にあれば同じようにリジェクトされます。  
この記事ではLLDBを使用してUIWebViewを使用している箇所を調べます。  

# 方法
### 1. アプリをデバッグ実行する。
### 2. 任意の箇所でブレークして、デバッグコンソールを表示
### 3. UIWebViewを使用している箇所に以下の2つのLLDBコマンドでブレークポイントをセット
> `rbreak UIWebView`  

rbreakは正規表現を含んだ任意の文字列を指定すると、その文字列を含むシンボル、ファンクションにブレークポイントを設定できるコマンドです。  


> `breakpoint set -p UIWebView -A `  

「-p」を使うとソースコード内の任意の文字列を含む箇所にブレークポイントを設定してくれます。  
「-A」を指定するとすべてのモジュールに対してブレークポイントを設定することができます。  

### 4. ブレークポイントの一覧を表示する。
`breakpoint list`コマンドによってブレークポイントの一覧を表示することができる。

### 5. UIWebViewが使用されている箇所を特定する。  
ブレークポイント情報には、モジュールやファイル、ソースコードの行情報が含まれるので、それらの情報からUIWebViewを使用している箇所を特定することができます。


------------

